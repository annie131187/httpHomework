{"version":3,"file":"main.js","mappings":"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","sources":["webpack://webpack5/./src/js/modal.js","webpack://webpack5/./src/js/app.js","webpack://webpack5/./src/index.js"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\n/* eslint-disable no-param-reassign */\nexport default class Modal {\n  constructor(element) {\n    if (typeof element === 'string') {\n      element = document.querySelector(element);\n    }\n    this._element = element;\n  }\n\n  renderAddModal() {\n    const addModal = `\n      <form class=\"modal add-modal\">\n        <h2 class=\"modal_title\">Добавить тикет</h2>\n        <h3 class=\"add-modal_textarea-title\">Краткое описание</h3>\n        <textarea type=\"text\" name=\"name\" class=\"add-modal_textarea add-modal_textarea--short\" rows=\"2\" autofocus></textarea>\n        <h3 class=\"add-modal_textarea-title\">Подробное описание</h3>\n        <textarea type=\"text\" name=\"description\" class=\"add-modal_textarea add-modal_textarea--long\" rows=\"4\" autofocus></textarea>\n        <div class=\"modal_btns\">\n          <button class=\"modal_btn-reset button\">Отмена</button>\n          <button type=\"submit\" class=\"modal_btn-ok button\">ОК</button>\n        </div>\n      </form>\n    `;\n\n    this._element.insertAdjacentHTML('beforeend', addModal);\n  }\n\n  renderDeleteModal() {\n    const deleteModal = `\n      <form class=\"modal delete-modal\">\n        <h2 class=\"modal_title\">Удалить тикет</h2>\n        <p class=\"delete-modal_text\">\n          Вы уверены, что хотите удалить тикет? Это действие необратимо.\n        </p>\n        <div class=\"modal_btns\">\n          <button class=\"modal_btn-reset button\">Отмена</button>\n          <button type=\"submit\" class=\"modal_btn-ok button\">ОК</button>\n        </div>\n      </form>\n    `;\n\n    this._element.insertAdjacentHTML('beforeend', deleteModal);\n  }\n\n  renderEditModal() {\n    const editModal = `\n      <form class=\"modal edit-modal\">\n        <h2 class=\"modal_title\">Изменить тикет</h2>\n        <h3 class=\"add-modal_textarea-title\">Краткое описание</h3>\n        <textarea type=\"text\" name=\"name\" class=\"add-modal_textarea add-modal_textarea--short\" rows=\"2\" autofocus></textarea>\n        <h3 class=\"add-modal_textarea-title\">Подробное описание</h3>\n        <textarea type=\"text\" name=\"description\" class=\"add-modal_textarea add-modal_textarea--long\" rows=\"4\" autofocus></textarea>\n        <div class=\"modal_btns\">\n          <button class=\"modal_btn-reset button\">Отмена</button>\n          <button type=\"submit\" class=\"modal_btn-ok button\">ОК</button>\n        </div>\n      </form>\n    `;\n\n    this._element.insertAdjacentHTML('beforeend', editModal);\n  }\n}\n","import Modal from './modal';\n\nconst port = 7010;\nconst url = `http://localhost:${port}`;\nconst addTicketBtn = document.querySelector('.add-ticket_btn');\nconst ticketsList = document.querySelector('.tickets-list');\n\n// Отображение списка тикетов\n\nfunction getTicketsList() {\n  const xhr = new XMLHttpRequest();\n  xhr.open('GET', url);\n  xhr.send();\n  xhr.addEventListener('load', () => {\n    if (xhr.status >= 200 && xhr.status < 300) {\n      try {\n        const data = JSON.parse(xhr.response);\n        data.forEach((elem) => {\n          ticketsList.insertAdjacentHTML('beforeend', `\n            <div class=\"list-item\" data-id=\"${elem.id}\">\n              <span class=\"ticket-status\" data-status=\"${elem.status}\"></span>\n              <div class=\"ticket-name\">${elem.name}\n                <p class=\"ticket-description hidden\">${elem.description}</p>\n              </div>\n              <span class=\"ticket-date\">${elem.created}</span>\n              <input type=\"button\" class=\"ticket-edit\">\n              <input type=\"button\" class=\"ticket-delete\">\n            </div>\n          `);\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  });\n}\n\ngetTicketsList();\n\n// Добавление тикета\naddTicketBtn.addEventListener('click', (e) => {\n  e.preventDefault();\n\n  const modalAdd = new Modal('body');\n  modalAdd.renderAddModal();\n\n  const addTask = document.querySelector('.add-modal');\n  addTask.classList.remove('hidden');\n  addTask.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n\n    const body = new FormData(addTask);\n\n    const xhr = new XMLHttpRequest();\n\n    xhr.open('POST', url);\n\n    addTask.classList.add('hidden');\n\n    xhr.send(body);\n\n    xhr.addEventListener('loadend', () => {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        try {\n          console.log(xhr.response);\n        } catch (err) {\n          console.error(err);\n        }\n      }\n    });\n  });\n\n  const resetBtn = addTask.querySelector('.modal_btn-reset');\n  resetBtn.addEventListener('click', (event) => {\n    event.preventDefault();\n\n    addTask.classList.add('hidden');\n  });\n});\n\nticketsList.addEventListener('click', (e) => {\n  // Показать подробное описание\n  if (e.target.classList.contains('ticket-name')) {\n    const taskDescription = e.target.querySelector('.ticket-description');\n    taskDescription.classList.toggle('hidden');\n  }\n\n  // Удаление тикета\n  if (e.target.classList.contains('ticket-delete')) {\n    const taskId = e.target.parentNode.dataset.id;\n    const modalDel = new Modal('body');\n    modalDel.renderDeleteModal();\n\n    const delTask = document.querySelector('.delete-modal');\n    delTask.classList.remove('hidden');\n    delTask.addEventListener('submit', (evt) => {\n      evt.preventDefault();\n\n      const xhr = new XMLHttpRequest();\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState !== 4) return;\n\n        console.log(xhr.response);\n      };\n\n      xhr.open('DELETE', `${url}?id=${taskId}`);\n\n      delTask.classList.add('hidden');\n\n      xhr.send();\n    });\n\n    const resetBtn = delTask.querySelector('.modal_btn-reset');\n    resetBtn.addEventListener('click', (evt) => {\n      evt.preventDefault();\n\n      delTask.classList.add('hidden');\n    });\n  }\n\n  // Изменение тикета\n  if (e.target.classList.contains('ticket-edit')) {\n    const taskId = e.target.parentNode.dataset.id;\n    const modalEdit = new Modal('body');\n    modalEdit.renderEditModal();\n\n    const editTask = document.querySelector('.edit-modal');\n    editTask.classList.remove('hidden');\n    editTask.addEventListener('submit', (evt) => {\n      evt.preventDefault();\n\n      const body = new FormData(editTask);\n\n      const xhr = new XMLHttpRequest();\n\n      xhr.open('PUT', `${url}?id=${taskId}`);\n\n      editTask.classList.add('hidden');\n\n      xhr.send(body);\n\n      xhr.addEventListener('load', () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          try {\n            console.log(xhr.response);\n          } catch (err) {\n            console.error(err);\n          }\n        }\n      });\n    });\n\n    const resetBtn = editTask.querySelector('.modal_btn-reset');\n    resetBtn.addEventListener('click', (evt) => {\n      evt.preventDefault();\n\n      editTask.classList.add('hidden');\n    });\n  }\n\n  // Изменение статуса тикета\n  if (e.target.classList.contains('ticket-status')) {\n    const taskId = e.target.parentNode.dataset.id;\n    const taskStatus = e.target.parentNode.dataset.status;\n\n    const xhr = new XMLHttpRequest();\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState !== 4) return;\n\n      console.log(xhr.response);\n    };\n\n    xhr.open('PUT', `${url}?id=${taskId}&status=${taskStatus}`);\n\n    xhr.send();\n  }\n});\n","import './css/style.css';\n\nimport './js/app';\n\n// TODO: write your code in app.js\n"],"names":["Modal","constructor","element","document","querySelector","_element","renderAddModal","addModal","insertAdjacentHTML","renderDeleteModal","deleteModal","renderEditModal","editModal","port","url","addTicketBtn","ticketsList","getTicketsList","xhr","XMLHttpRequest","open","send","addEventListener","status","data","JSON","parse","response","forEach","elem","id","name","description","created","e","console","error","preventDefault","modalAdd","addTask","classList","remove","evt","body","FormData","add","log","err","resetBtn","event","target","contains","taskDescription","toggle","taskId","parentNode","dataset","modalDel","delTask","onreadystatechange","readyState","modalEdit","editTask","taskStatus"],"sourceRoot":""}